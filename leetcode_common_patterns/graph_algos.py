
def canFinish(numCourses: int, prerequisites: list[list[int]]) -> bool:
    """
    æ™‚é–“è¤‡é›œåº¦ï¼ˆTime Complexity, TCï¼‰ 
    åœ¨é€™é“é¡Œç›®ä¸­ï¼Œæˆ‘å€‘ç”¨æ·±åº¦å„ªå…ˆæœå°‹ï¼ˆDFSï¼‰éæ­·åœ–ï¼Œä¸¦æª¢æŸ¥æ˜¯å¦æœ‰ç’°å­˜åœ¨ã€‚ 
    1. æ§‹å»ºåœ–çš„æ™‚é–“ graph = {i: [] for i in range(numCourses)} åˆå§‹åŒ–ç©ºåœ–çš„æ™‚é–“è¤‡é›œåº¦ç‚º ğ‘‚ ( ğ‘‰ ) O(V)ï¼Œå…¶ä¸­ ğ‘‰ V æ˜¯ç¯€é»æ•¸ï¼Œä¹Ÿå°±æ˜¯èª²ç¨‹æ•¸ numCoursesã€‚ 
    for a, i in prerequisites: graph[a].append(i) éæ­· prerequisites ä¸¦å°‡é‚ŠåŠ å…¥åœ–ï¼Œæ™‚é–“è¤‡é›œåº¦ç‚º ğ‘‚ ( ğ¸ ) O(E)ï¼Œå…¶ä¸­ ğ¸ E æ˜¯å…ˆä¿®æ¢ä»¶æ•¸ï¼Œä¹Ÿå°±æ˜¯é‚Šçš„æ•¸é‡ã€‚ å› æ­¤ï¼Œæ§‹å»ºåœ–çš„æ™‚é–“è¤‡é›œåº¦ç‚ºï¼š ğ‘‚ ( ğ‘‰ + ğ¸ ) 
    O(V+E) 
    2. DFS éæ­·åœ–çš„æ™‚é–“ åœ¨æœ€å£æƒ…æ³ä¸‹ï¼Œæ¯å€‹ç¯€é»æœƒè¢«è¨ªå•ä¸€æ¬¡ï¼Œä¸¦ä¸”æ¯æ¢é‚Šä¹Ÿåªæœƒè¢«æª¢æŸ¥ä¸€æ¬¡ã€‚ è¨ªå•æ‰€æœ‰ç¯€é»çš„æ™‚é–“è¤‡é›œåº¦ç‚º ğ‘‚ ( ğ‘‰ ) O(V)ã€‚ 
    æª¢æŸ¥æ‰€æœ‰é‚Šçš„æ™‚é–“è¤‡é›œåº¦ç‚º ğ‘‚ ( ğ¸ ) O(E)ã€‚ å› æ­¤ï¼ŒDFS çš„æ™‚é–“è¤‡é›œåº¦ç‚ºï¼š ğ‘‚ ( ğ‘‰ + ğ¸ ) 
    O(V+E) ç¸½æ™‚é–“è¤‡é›œåº¦ åœ–çš„æ§‹å»ºå’Œ DFS éæ­·æ˜¯é †åºåŸ·è¡Œçš„ï¼Œ
    ç¸½çš„æ™‚é–“è¤‡é›œåº¦ç‚ºï¼š ğ‘‚ ( ğ‘‰ + ğ¸ ) O(V+E) 
    ç©ºé–“è¤‡é›œåº¦ï¼ˆSpace Complexity, SCï¼‰ 
    1. åœ–çš„å­˜å„² ç”¨ä¸€å€‹å­—å…¸ graph å­˜å„²æœ‰å‘åœ–ï¼Œå­—å…¸ä¸­æ¯å€‹ç¯€é»å­˜çš„æ˜¯ä¸€å€‹é„°æ¥åˆ—è¡¨ã€‚ 
       åˆ—è¡¨çš„å¤§å°ç¸½è¨ˆç‚º ğ‘‚ ( ğ¸ ) O(E)ã€‚ 
    åœ–çµæ§‹çš„ç©ºé–“è¤‡é›œåº¦ç‚ºï¼š ğ‘‚ ( ğ‘‰ + ğ¸ ) O(V+E) 
    2. éæ­¸æ£§çš„æ·±åº¦ ä½¿ç”¨ DFS æ™‚ï¼Œéæ­¸æ£§çš„æœ€å¤§æ·±åº¦å–æ±ºæ–¼åœ–çš„æ·±åº¦ï¼Œæœ€å£æƒ…æ³ä¸‹æ·±åº¦å¯ä»¥æ˜¯ ğ‘‚ ( ğ‘‰ ) O(V)ã€‚ 
    é€™éƒ¨åˆ†çš„ç©ºé–“è¤‡é›œåº¦ç‚ºï¼š ğ‘‚ ( ğ‘‰ ) O(V) 
    3. ç‹€æ…‹è¡¨çš„å­˜å„² ä½¿ç”¨ status å­—å…¸ä¾†è¨˜éŒ„æ¯å€‹ç¯€é»çš„è¨ªå•ç‹€æ…‹ã€‚ 
    è©²å­—å…¸çš„å¤§å°ç‚º ğ‘‚ ( ğ‘‰ ) O(V)ã€‚ 
    ç¸½ç©ºé–“è¤‡é›œåº¦ æ‰€æœ‰ç©ºé–“éœ€æ±‚ç›¸åŠ ï¼Œç¸½ç©ºé–“è¤‡é›œåº¦ç‚ºï¼š ğ‘‚ ( ğ‘‰ + ğ¸ ) O(V+E) 
    ç¸½çµ æ™‚é–“è¤‡é›œåº¦ ğ‘‡ ğ¶ TCï¼š ğ‘‚ ( ğ‘‰ + ğ¸ ) 
    O(V+E) ç©ºé–“è¤‡é›œåº¦ ğ‘† ğ¶ SCï¼š ğ‘‚ ( ğ‘‰ + ğ¸ ) O(V+E)

    """
    # O(V+E) TS
    graph = {i: set() for i in range(numCourses)} #T: O(V)
    status = {i: 0 for i in range(numCourses)} #T: O(V)

    for a, b in prerequisites:
        graph[a].add(b) # O(E)

    # 0: not visited
    # 1: finished (checked OK)
    # -1: checking

    # Return true if cyclic
    # meet at vertex w/ -1 twice or more.
    def dfs(vertex):
        #T: O(V+E)
        #S: O(V)

        if status[vertex] == 1:
            return False
        elif status[vertex] == -1:
            return True
        
        # status 0 --> -1
        status[vertex] = -1 

        for v in graph[vertex]:
            if dfs(v):
                return True

        status[vertex] = 1
        return False
    
    for c in list(graph.keys()):
        if dfs(c):
            return False
    return True
